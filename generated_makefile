
CC = gcc
ALL_FLAGS = -Wall -Wextra -Wpedantic -Werror -O3 -lm -lpthread -L"C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v12.1/lib/x64" -I"C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v12.1/include" -lOpenCL "C:/Windows/System32/OpenCL.dll"

all: objects programs

objects:
	@echo ""
	@echo "Compiling the source files..."
	@echo "|"
	$(CC) -c "src/utils.c" -o "obj/utils.o"
	$(CC) -c "src/vectors.c" -o "obj/vectors.o"
	$(CC) -c "src/gpu/gpu_utils.c" -o "obj/gpu/gpu_utils.o"
	$(CC) -c "src/storage/hash_table.c" -o "obj/storage/hash_table.o"
	@echo ""
	@echo ""
	@echo ""
	@echo "Compiling the programs..."
	@echo "|"
	$(CC) -o "bin/testing_pow_gpu.exe" "programs/testing_pow_gpu.c" "obj/utils.o" "obj/vectors.o" "obj/gpu/gpu_utils.o" "obj/storage/hash_table.o" $(ALL_FLAGS)
	@echo "|"
	@echo "Compilation done"
	@echo ""

clean:
	@echo "Cleaning the project..."
	@rm -rf obj
	@rm -rf bin
	@echo "Clean done"

